-- TODO

CREATE SEQUENCE SQ_AC_PCPL START WITH 1;
CREATE TABLE AC_PCPL (
  ID             BIGSERIAL    NOT NULL PRIMARY KEY,
  NAME           VARCHAR(100) NOT NULL,
  ENABLED        BOOLEAN      NOT NULL,
  LOCKED         BOOLEAN      NOT NULL,
  PRINCIPAL_TYPE INT          NOT NULL,
  M_ST           INT          NOT NULL,
  C_ID           INT          NOT NULL,
  C_TS           TIMESTAMP,
  D_ID           INT,
  M_ID           INT,
  D_TS           TIMESTAMP
  --  CONSTRAINT WHATEVER_FK FOREIGN KEY (WHATEVER_ID) REFERENCES WHATEVER_TABLE (WHATEVER_ID)
);

CREATE SEQUENCE SQ_AC_PCPL_ROLE START WITH 1;
CREATE TABLE AC_PCPL_ROLE (
  ID           BIGSERIAL NOT NULL PRIMARY KEY,
  PRINCIPAL_ID BIGSERIAL NOT NULL,
  ROLE_TYPE    INT       NOT NULL,
  M_TS         TIMESTAMP,
  C_ID         INT,
  D_ID         INT,
  M_ID         INT,
  C_TS         TIMESTAMP,
  D_TS         TIMESTAMP,
  M_ST         INT          NOT NULL
);

CREATE TABLE AC_USER (
  ID        BIGSERIAL    NOT NULL PRIMARY KEY,
  REAL_NAME VARCHAR(100) NOT NULL,
  EMAIL     VARCHAR(100) NOT NULL,
  PASSWORD  VARCHAR(100) NOT NULL,
  M_TS      INT,
  C_ID      INT,
  C_TS      TIMESTAMP
);

CREATE TABLE AC_GROP (
  ID BIGSERIAL NOT NULL PRIMARY KEY
);

CREATE SEQUENCE SQ_AC_GROP_MMBR START WITH 1;
CREATE TABLE AC_GROP_MMBR (
  ID           BIGSERIAL NOT NULL PRIMARY KEY,
  PRINCIPAL_ID BIGSERIAL NOT NULL,
  GROUP_ID     BIGSERIAL NOT NULL,
  M_TS         TIMESTAMP,
  M_ID         BIGINT,
  C_ID         BIGINT,
  D_ID         BIGINT,
  C_TS         TIMESTAMP,
  D_TS         TIMESTAMP,
  M_ST         INTEGER,

  CONSTRAINT FOREIGN_FK_1 FOREIGN KEY (PRINCIPAL_ID) REFERENCES AC_PCPL (ID),
  CONSTRAINT FOREIGN_FK_2 FOREIGN KEY (GROUP_ID) REFERENCES AC_GROP (ID)
);

CREATE SEQUENCE SQ_AC_ACDM_SESN START WITH 1;
CREATE TABLE AC_ACDM_SESN
(
  ID            BIGINT PRIMARY KEY NOT NULL,
  CODE          VARCHAR(255) NOT NULL,
  DESCRIPTION   VARCHAR(255) NOT NULL,
  START_DATE    TIMESTAMP NOT NULL,
  END_DATE      TIMESTAMP NOT NULL,
  CURRENT_      BOOLEAN NOT NULL,
  M_TS          TIMESTAMP,
  M_ID          BIGINT,
  C_TS          TIMESTAMP,
  C_ID          BIGINT,
  D_TS          TIMESTAMP,
  D_ID          BIGINT,
  M_ST          INTEGER
);

GRANT ALL PRIVILEGES ON DATABASE account TO account;